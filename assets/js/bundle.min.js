var _options={projects_path:"/var/www/",hosts_path:"/etc/hosts",sites_conig_path:"/etc/apache2/sites-available/mysites.conf"},errorlog=`[Thu Jun 24 00:00:17.861492 2021] [mpm_prefork:notice] [pid 1413] AH00163: Apache/2.4.41 (Ubuntu) mpm-itk/2.4.7-04 configured -- resuming normal operations
[Thu Jun 24 00:00:17.861510 2021] [core:notice] [pid 1413] AH00094: Command line: "/usr/sbin/apache2"`,accesslog="access.log text",sites_conig=`<VirtualHost *:80>
    ServerName tomohauk
    DocumentRoot /var/www/tomohauk
    <Directory /var/www/tomohauk>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>`,hosts=`127.0.0.1       localhost
127.0.1.1       shepel-nix`;function ipcRenderer(a,b=""){switch(a){case"write_settings":setTimeout(()=>{eventSenderSend("system-res","settings saved"),eventSenderSend("loader-hide")},1e3);break;case"save_file":setTimeout(()=>{eventSenderSend("system-res","file saved"),eventSenderSend("loader-hide")},1e3);break;case"set_php_ver":setTimeout(()=>{eventSenderSend("system-res","change php version ..."),eventSenderSend("php-current",b.en_ver),eventSenderSend("system-res","apache restarted ..."),eventSenderSend("loader-hide")},1e3);break;case"restart_apache":setTimeout(()=>{eventSenderSend("system-res","apache restarted"),eventSenderSend("loader-hide")},1e3);break;case"show_error_log":eventSenderSend("system-res","open file /var/log/apache2/error.log ..."),eventSenderSend("to-editor",errorlog),eventSenderSend("loader-hide");break;case"show_access_log":eventSenderSend("system-res","open file /var/log/apache2/access.log ..."),eventSenderSend("to-editor",accesslog),eventSenderSend("loader-hide");break;case"edit_mysites_conf":eventSenderSend("system-res","opening ..."),eventSenderSend("to-editor",sites_conig),eventSenderSend("loader-hide");break;case"edit_hosts":eventSenderSend("system-res","opening ..."),eventSenderSend("to-editor",hosts),eventSenderSend("loader-hide");break;case"git_clone":var c=b.repo_name;eventSenderSend("system-res","clone "+c+"..."),setTimeout(()=>{eventSenderSend("clear-inputs-git",["git_clone","repo_name"]),eventSenderSend("system-res","repo "+c+" clone success"),eventSenderSend("loader-hide")},1e3);break;case"check_pushed":setTimeout(()=>{eventSenderSend("system-res","checked 115 folders"),eventSenderSend("git-status-push","checked 115 folders\n"),eventSenderSend("loader-hide")},1e3);break;default:}}
function eventSenderSend(a,b){switch(a){case"settings-data":console.log(settings),settings.settings=b;break;case"system-res":terminal.text+="["+new Date().toLocaleTimeString("ru-RU",{timeZone:"Europe/Moscow"})+"] "+b+"\n";break;case"loader-hide":loader.show=!1;break;case"php-available":php.php_ver=b;break;case"php-current":php.php_cur=b;break;case"to-editor":editor.display="show-editor",editor.text=b;break;case"clear-inputs-git":for(var c=0;b.length>c;c++)$("input[name=\""+b[c]+"\"]").val(""),git[b[c]]="";break;case"git-status-push":git.need_push+=b+"\n",git.show_push=!0;break;default:}}function openPage(a){$(".page[data-page=\""+a+"\"]").hasClass("active")||($(".js-menu-item").removeClass("active"),$(".page").removeClass("active"),$(".js-menu-item[data-page=\""+a+"\"]").addClass("active"),$(".page[data-page=\""+a+"\"]").addClass("active"))}var loader=new Vue({el:"#loader",data:{show:!1}}),terminal=new Vue({el:"#terminal",data:{terminal_items:[{time:new Date,text:"... started"}],text:"["+new Date().toLocaleTimeString("ru-RU",{timeZone:"Europe/Moscow"})+"] ... started\n"},watch:{text:function(){$("#terminal textarea").stop().animate({scrollTop:2*$("#terminal textarea")[0].scrollHeight},800)}}}),settings=new Vue({el:"#settings",data:{settings:{},php_ver:[]},mounted:function(){this.settings=_options}}),editor=new Vue({el:"#editor",data:{file:"",text:"",display:"hide-editor",save_btn:!1},methods:{saveFromEditor:function(){loader.show=!0;var a={file:this.file,text:this.text};ipcRenderer("save_file",a)}}}),php=new Vue({el:"#php",data:{php_ver:[],php_cur:""},mounted:function(){this.php_ver=["5.6","7.2","7.4"],this.php_cur="7.2"},methods:{phpCurrent:function(a,b){if(a==b)return"enabled"},setPhpVer:function(a){if(!a.target.classList.contains("enabled")){loader.show=!0;var b=$(a.target).text(),c={en_ver:b,all_ver:this.php_ver};ipcRenderer("set_php_ver",c)}}}}),git=new Vue({el:"#git",data:{git_clone:"",repo_name:"",need_push:"",show_push:!1},methods:{gitClone:function(){if(0<this.git_clone.replace(/\s/g,"").length){loader.show=!0,$("button[data-show=\"git_clone\"]").removeClass("show").addClass("hide").prop("disabled",!0);var a={repo:this.git_clone.replace(/\s/g,""),repo_name:this.repo_name?this.repo_name:this.git_clone.replace(/\s/g,"").split("/")[1].split(".")[0]};ipcRenderer("git_clone",a)}},checkPushed:function(){loader.show=!0,this.need_push="",ipcRenderer("check_pushed")}},watch:{git_clone:function(){if(-1!==this.git_clone.indexOf("/")&&-1!==this.git_clone.indexOf(".")){var a=this.git_clone.split("/")[1].split(".")[0];a&&(this.repo_name=a)}else this.repo_name=this.git_clone}}});openPage("apache"),$(".js-button").on("click",function(){loader.show=!0;var a=$(this).attr("data-exec");ipcRenderer(a)}),$(".js-button-open").on("click",function(){var a=$(this).attr("data-exec"),b=$(this).attr("data-file");$(this).hasClass("with-save")&&b&&(editor.save_btn=!0,editor.file=settings.settings[b]),ipcRenderer(a)}),$(".js-menu-button").on("click",function(){var a=$("#menu").hasClass("open");a?$("#menu").removeClass("open"):$("#menu").addClass("open")}),$(".js-menu-item").on("click",function(){var a=$(this).attr("data-page");openPage(a)}),$("input").on("input propertychange",function(){var a=$(this).attr("name");a&&(0<$(this).val().replace(/\s/g,"").length?$("button[data-show=\""+a+"\"]").removeClass("hide").addClass("show").prop("disabled",!1):$("button[data-show=\""+a+"\"]").removeClass("show").addClass("hide").prop("disabled",!0))}),$(".js-save").on("click",function(){loader.show=!0,$(this).removeClass("show").addClass("hide"),"/"!==settings.settings.projects_path.slice(-1)&&(settings.settings.projects_path+="/"),ipcRenderer("write_settings",settings.settings)}),$(".js-close-editor").on("click",function(){editor.display="hide-editor",editor.save_btn=!1});